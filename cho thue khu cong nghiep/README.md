# Há»‡ thá»‘ng quáº£n lÃ½ phÃ²ng trá»

Há»‡ thá»‘ng quáº£n lÃ½ phÃ²ng trá» hiá»‡n Ä‘áº¡i vÃ  toÃ n diá»‡n Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i Next.js 15, TypeScript vÃ  MongoDB.

## ğŸš€ TÃ­nh nÄƒng chÃ­nh

### ğŸ“Š Dashboard
- Thá»‘ng kÃª tá»•ng quan vá» phÃ²ng, doanh thu, hÃ³a Ä‘Æ¡n
- Biá»ƒu Ä‘á»“ doanh thu theo thÃ¡ng
- Danh sÃ¡ch hÃ³a Ä‘Æ¡n sáº¯p Ä‘áº¿n háº¡n
- Danh sÃ¡ch sá»± cá»‘ cáº§n xá»­ lÃ½
- Há»£p Ä‘á»“ng sáº¯p háº¿t háº¡n

### ğŸ¢ Quáº£n lÃ½ tÃ²a nhÃ 
- CRUD thÃ´ng tin tÃ²a nhÃ 
- Upload áº£nh tÃ²a nhÃ 
- Quáº£n lÃ½ tiá»‡n Ã­ch chung
- Xem danh sÃ¡ch phÃ²ng theo tÃ²a nhÃ 

### ğŸ  Quáº£n lÃ½ phÃ²ng
- CRUD thÃ´ng tin phÃ²ng
- Upload áº£nh phÃ²ng
- Lá»c phÃ²ng theo tráº¡ng thÃ¡i
- Xem lá»‹ch sá»­ thuÃª phÃ²ng
- Quáº£n lÃ½ tiá»‡n nghi phÃ²ng

### ğŸ‘¥ Quáº£n lÃ½ khÃ¡ch thuÃª
- CRUD thÃ´ng tin khÃ¡ch thuÃª
- Upload áº£nh CCCD
- Lá»‹ch sá»­ thuÃª phÃ²ng
- Lá»‹ch sá»­ thanh toÃ¡n

### ğŸ“„ Quáº£n lÃ½ há»£p Ä‘á»“ng
- Táº¡o há»£p Ä‘á»“ng má»›i
- Upload file há»£p Ä‘á»“ng PDF
- Gia háº¡n há»£p Ä‘á»“ng
- Cháº¥m dá»©t há»£p Ä‘á»“ng
- In há»£p Ä‘á»“ng

### âš¡ Quáº£n lÃ½ chá»‰ sá»‘ Ä‘iá»‡n nÆ°á»›c
- Ghi chá»‰ sá»‘ hÃ ng thÃ¡ng
- Upload áº£nh chá»‰ sá»‘
- Tá»± Ä‘á»™ng tÃ­nh tiÃªu thá»¥
- Lá»‹ch sá»­ chá»‰ sá»‘

### ğŸ§¾ Quáº£n lÃ½ hÃ³a Ä‘Æ¡n
- Táº¡o hÃ³a Ä‘Æ¡n tá»± Ä‘á»™ng theo chu ká»³
- TÃ­nh toÃ¡n tá»± Ä‘á»™ng: tiá»n Ä‘iá»‡n, nÆ°á»›c, dá»‹ch vá»¥
- Gá»­i thÃ´ng bÃ¡o hÃ³a Ä‘Æ¡n
- In hÃ³a Ä‘Æ¡n
- Xuáº¥t bÃ¡o cÃ¡o Excel

### ğŸ’° Quáº£n lÃ½ thanh toÃ¡n
- Ghi nháº­n thanh toÃ¡n
- Upload biÃªn lai
- Lá»‹ch sá»­ thanh toÃ¡n
- Xuáº¥t phiáº¿u thu

### ğŸš¨ Quáº£n lÃ½ sá»± cá»‘
- KhÃ¡ch thuÃª bÃ¡o cÃ¡o sá»± cá»‘
- PhÃ¢n loáº¡i vÃ  Æ°u tiÃªn sá»± cá»‘
- Theo dÃµi tiáº¿n Ä‘á»™ xá»­ lÃ½
- Upload áº£nh sá»± cá»‘

### ğŸ”” ThÃ´ng bÃ¡o
- Gá»­i thÃ´ng bÃ¡o Ä‘áº¿n khÃ¡ch thuÃª
- ThÃ´ng bÃ¡o theo phÃ²ng/tÃ²a nhÃ 
- Lá»‹ch sá»­ thÃ´ng bÃ¡o

### âš™ï¸ CÃ i Ä‘áº·t há»‡ thá»‘ng
- Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
- Cáº¥u hÃ¬nh há»‡ thá»‘ng
- Sao lÆ°u vÃ  khÃ´i phá»¥c dá»¯ liá»‡u
- CÃ i Ä‘áº·t thÃ´ng bÃ¡o

## ğŸ›  Tech Stack

### Frontend
- **Framework**: Next.js 15 (App Router)
- **Language**: TypeScript
- **UI Components**: shadcn/ui
- **Styling**: Tailwind CSS v4.1
- **State Management**: React Hooks, Context API
- **Form Handling**: React Hook Form + Zod validation
- **Icons**: lucide-react

### Backend
- **API**: Next.js API Routes (App Router)
- **Authentication**: NextAuth.js (JWT + Session)
- **Database**: MongoDB vá»›i Mongoose ODM

### Additional Libraries
- **Date handling**: date-fns
- **Charts**: recharts
- **Toast notifications**: sonner
- **File upload**: uploadthing hoáº·c cloudinary

## ğŸ“¦ CÃ i Ä‘áº·t

### YÃªu cáº§u há»‡ thá»‘ng
- **Node.js**: PhiÃªn báº£n 18 trá»Ÿ lÃªn (Khuyáº¿n nghá»‹: Node.js 20+)
- **npm**: Äi kÃ¨m vá»›i Node.js
- **MongoDB Atlas**: URI connection string (hoáº·c MongoDB local)
- **Git**: Äá»ƒ clone repository
- **Code Editor**: VS Code (khuyáº¿n nghá»‹) hoáº·c báº¥t ká»³ editor nÃ o

---

## ğŸš€ HÆ¯á»šNG DáºªN SETUP CHO KHÃCH HÃ€NG Má»šI

### BÆ°á»›c 1: Chuáº©n bá»‹ mÃ´i trÆ°á»ng

#### 1.1. CÃ i Ä‘áº·t Node.js
- Táº£i vÃ  cÃ i Ä‘áº·t Node.js tá»«: https://nodejs.org/
- Kiá»ƒm tra cÃ i Ä‘áº·t thÃ nh cÃ´ng:
```bash
node --version    # NÃªn >= v18.0.0
npm --version     # NÃªn >= 9.0.0
```

#### 1.2. CÃ i Ä‘áº·t Git (náº¿u chÆ°a cÃ³)
- Windows: https://git-scm.com/download/win
- Mac: https://git-scm.com/download/mac
- Linux: `sudo apt-get install git`

### BÆ°á»›c 2: Clone dá»± Ã¡n

```bash
# Clone repository (thay <repository-url> báº±ng link git cá»§a báº¡n)
git clone <repository-url>

# Di chuyá»ƒn vÃ o thÆ° má»¥c dá»± Ã¡n
cd demo-phong-tro
```

### BÆ°á»›c 3: CÃ i Ä‘áº·t dependencies

```bash
# CÃ i Ä‘áº·t táº¥t cáº£ package cáº§n thiáº¿t (cÃ³ thá»ƒ máº¥t 2-5 phÃºt)
npm install

# Hoáº·c náº¿u gáº·p lá»—i, thá»­:
npm install --legacy-peer-deps
```

### BÆ°á»›c 4: Cáº¥u hÃ¬nh Environment Variables

#### 4.1. Táº¡o file .env.local
```bash
# Windows (PowerShell)
Copy-Item env.example .env.local

# Mac/Linux
cp env.example .env.local
```

#### 4.2. Cáº¥u hÃ¬nh MongoDB URI

**Má»Ÿ file `.env.local`** báº±ng editor vÃ  cáº­p nháº­t cÃ¡c thÃ´ng tin sau:

```env
# Database - QUAN TRá»ŒNG: ThÃªm tÃªn database vÃ o URI
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/TENDATABASE?retryWrites=true&w=majority&appName=AppName



# NextAuth - Táº¡o secret key ngáº«u nhiÃªn
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-random-secret-key-here-make-it-long-and-complex

# Cloudinary (upload áº£nh) - QUAN TRá»ŒNG
NEXT_PUBLIC_CLOUD_NAME=your-cloudinary-name
NEXT_PUBLIC_UPLOAD_PRESET=your-upload-preset

# Email (tÃ¹y chá»n - Ä‘á»ƒ gá»­i thÃ´ng bÃ¡o)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
```

#### 4.3. Táº¡o NEXTAUTH_SECRET
Cháº¡y lá»‡nh sau Ä‘á»ƒ táº¡o secret key ngáº«u nhiÃªn:

```bash
# Windows PowerShell
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"

# Mac/Linux/Git Bash
openssl rand -base64 32
```

Copy káº¿t quáº£ vÃ o `NEXTAUTH_SECRET` trong file `.env.local`

#### 4.4. Cáº¥u hÃ¬nh Cloudinary (Ä‘á»ƒ upload áº£nh)

1. ÄÄƒng kÃ½ tÃ i khoáº£n miá»…n phÃ­ táº¡i: https://cloudinary.com/
2. VÃ o Dashboard, láº¥y:
   - **Cloud Name**: Äiá»n vÃ o `NEXT_PUBLIC_CLOUD_NAME`
   - **Upload Preset**: 
     - VÃ o Settings â†’ Upload
     - Táº¡o Upload Preset má»›i (unsigned)
     - Copy tÃªn preset vÃ o `NEXT_PUBLIC_UPLOAD_PRESET`

### BÆ°á»›c 5: Cháº¡y á»©ng dá»¥ng

#### 5.1. Khá»Ÿi Ä‘á»™ng Development Server

```bash
npm run dev
```

Äá»£i vÃ i giÃ¢y cho Ä‘áº¿n khi tháº¥y thÃ´ng bÃ¡o:
```
âœ“ Ready in 3.2s
â—‹ Local:   http://localhost:3000
```

#### 5.2. Truy cáº­p á»©ng dá»¥ng

Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p: **http://localhost:3000**

### BÆ°á»›c 6: Táº¡o dá»¯ liá»‡u máº«u (Optional)

Náº¿u muá»‘n test vá»›i dá»¯ liá»‡u máº«u:

#### 6.1. Má»Ÿ Terminal má»›i (giá»¯ server Ä‘ang cháº¡y)

#### 6.2. Gá»i API seed data

```bash
# Windows PowerShell
Invoke-WebRequest -Uri http://localhost:3000/api/seed -Method POST

# Mac/Linux/Git Bash
curl -X POST http://localhost:3000/api/seed

# Hoáº·c dÃ¹ng browser: Truy cáº­p http://localhost:3000/api/seed trong trÃ¬nh duyá»‡t
```

#### 6.3. ÄÄƒng nháº­p vá»›i tÃ i khoáº£n máº·c Ä‘á»‹nh

- **Email**: `admin@example.com`
- **Password**: `admin123`

---

## ğŸ”§ Xá»­ lÃ½ lá»—i thÆ°á»ng gáº·p

### Lá»—i 1: "Cannot connect to MongoDB"
**NguyÃªn nhÃ¢n**: MongoDB URI khÃ´ng Ä‘Ãºng hoáº·c IP chÆ°a Ä‘Æ°á»£c whitelist

**Giáº£i phÃ¡p**:
1. Kiá»ƒm tra MongoDB URI trong file `.env.local`
2. VÃ o MongoDB Atlas â†’ Network Access â†’ Add IP Address
3. Chá»n "Allow access from anywhere" (0.0.0.0/0) Ä‘á»ƒ test

### Lá»—i 2: "Module not found"
**NguyÃªn nhÃ¢n**: Dependencies chÆ°a Ä‘Æ°á»£c cÃ i Ä‘áº·t Ä‘áº§y Ä‘á»§

**Giáº£i phÃ¡p**:
```bash
# XÃ³a node_modules vÃ  cÃ i láº¡i
rm -rf node_modules package-lock.json
npm install
```

### Lá»—i 3: "Port 3000 already in use"
**NguyÃªn nhÃ¢n**: Port 3000 Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng

**Giáº£i phÃ¡p**:
```bash
# Cháº¡y trÃªn port khÃ¡c
npm run dev -- -p 3001
```

### Lá»—i 4: Upload áº£nh khÃ´ng hoáº¡t Ä‘á»™ng
**NguyÃªn nhÃ¢n**: ChÆ°a cáº¥u hÃ¬nh Cloudinary

**Giáº£i phÃ¡p**: Xem láº¡i BÆ°á»›c 4.4

---

## ğŸ“ Checklist Setup

- [ ] âœ… ÄÃ£ cÃ i Ä‘áº·t Node.js 18+
- [ ] âœ… ÄÃ£ clone repository
- [ ] âœ… ÄÃ£ cháº¡y `npm install` thÃ nh cÃ´ng
- [ ] âœ… ÄÃ£ táº¡o file `.env.local`
- [ ] âœ… ÄÃ£ cáº¥u hÃ¬nh MONGODB_URI vá»›i **TÃŠN DATABASE**
- [ ] âœ… ÄÃ£ táº¡o NEXTAUTH_SECRET
- [ ] âœ… ÄÃ£ cáº¥u hÃ¬nh Cloudinary
- [ ] âœ… ÄÃ£ cháº¡y `npm run dev` thÃ nh cÃ´ng
- [ ] âœ… Truy cáº­p http://localhost:3000 Ä‘Æ°á»£c
- [ ] âœ… (Optional) ÄÃ£ seed data vÃ  Ä‘Äƒng nháº­p Ä‘Æ°á»£c

---

## ğŸŒ Deploy lÃªn Production

### Deploy lÃªn Vercel (Khuyáº¿n nghá»‹ - Miá»…n phÃ­)

1. **Push code lÃªn GitHub**
```bash
git add .
git commit -m "Initial commit"
git push origin main
```

2. **Deploy vá»›i Vercel**
   - Truy cáº­p: https://vercel.com/
   - ÄÄƒng nháº­p báº±ng GitHub
   - Click "New Project"
   - Import repository `demo-phong-tro`
   - Cáº¥u hÃ¬nh Environment Variables (copy tá»« `.env.local`)
   - Click "Deploy"

3. **Cáº­p nháº­t NEXTAUTH_URL**
   - Sau khi deploy xong, copy URL Vercel (vd: `https://demo-phong-tro.vercel.app`)
   - VÃ o Settings â†’ Environment Variables
   - Sá»­a `NEXTAUTH_URL` thÃ nh URL má»›i
   - Redeploy

---

## ğŸ’¡ Tips cho khÃ¡ch hÃ ng má»›i

1. **Backup MongoDB URI**: LÆ°u láº¡i MongoDB URI á»Ÿ nÆ¡i an toÃ n
2. **Äá»•i máº­t kháº©u admin**: ÄÄƒng nháº­p vÃ  Ä‘á»•i password ngay
3. **Táº¡o tÃ i khoáº£n riÃªng**: KhÃ´ng dÃ¹ng chung tÃ i khoáº£n admin
4. **Backup database**: ThÆ°á»ng xuyÃªn export data tá»« MongoDB Atlas
5. **Check logs**: Náº¿u cÃ³ lá»—i, xem logs trong terminal
6. **Update thÆ°á»ng xuyÃªn**: Cháº¡y `npm update` Ä‘á»ƒ update dependencies

---

## ğŸ“ Há»— trá»£

Náº¿u gáº·p váº¥n Ä‘á» trong quÃ¡ trÃ¬nh setup:
1. Kiá»ƒm tra láº¡i tá»«ng bÆ°á»›c trong hÆ°á»›ng dáº«n
2. Xem pháº§n "Xá»­ lÃ½ lá»—i thÆ°á»ng gáº·p"
3. LiÃªn há»‡ ngÆ°á»i phÃ¡t triá»ƒn

## ğŸ“Š Database Schema

Há»‡ thá»‘ng sá»­ dá»¥ng MongoDB vá»›i cÃ¡c collection chÃ­nh:

- **NguoiDung**: Quáº£n lÃ½ ngÆ°á»i dÃ¹ng (admin, chá»§ nhÃ , nhÃ¢n viÃªn)
- **ToaNha**: ThÃ´ng tin tÃ²a nhÃ 
- **Phong**: ThÃ´ng tin phÃ²ng trá»
- **KhachThue**: ThÃ´ng tin khÃ¡ch thuÃª
- **HopDong**: Há»£p Ä‘á»“ng thuÃª phÃ²ng
- **ChiSoDienNuoc**: Chá»‰ sá»‘ Ä‘iá»‡n nÆ°á»›c hÃ ng thÃ¡ng
- **HoaDon**: HÃ³a Ä‘Æ¡n thanh toÃ¡n
- **ThanhToan**: Giao dá»‹ch thanh toÃ¡n
- **SuCo**: BÃ¡o cÃ¡o sá»± cá»‘
- **ThongBao**: ThÃ´ng bÃ¡o há»‡ thá»‘ng

## ğŸ” Authentication

Há»‡ thá»‘ng sá»­ dá»¥ng NextAuth.js vá»›i:
- JWT tokens
- Session management
- Role-based access control (admin, chá»§ nhÃ , nhÃ¢n viÃªn)
- Protected routes

## ğŸ“± Responsive Design

- Mobile-first approach
- Sidebar collapse trÃªn mobile
- Báº£ng responsive vá»›i horizontal scroll
- Form stack trÃªn mobile

## ğŸš€ Deployment

### Vercel (Recommended)
1. Push code lÃªn GitHub
2. Connect vá»›i Vercel
3. Cáº¥u hÃ¬nh environment variables
4. Deploy

### Docker
```bash
docker build -t motel-management .
docker run -p 3000:3000 motel-management
```

## ğŸ“ API Documentation

### Authentication
- `POST /api/auth/register` - ÄÄƒng kÃ½ tÃ i khoáº£n
- `POST /api/auth/[...nextauth]` - ÄÄƒng nháº­p

### TÃ²a nhÃ 
- `GET /api/toa-nha` - Láº¥y danh sÃ¡ch tÃ²a nhÃ 
- `POST /api/toa-nha` - Táº¡o tÃ²a nhÃ  má»›i
- `GET /api/toa-nha/[id]` - Láº¥y thÃ´ng tin tÃ²a nhÃ 
- `PUT /api/toa-nha/[id]` - Cáº­p nháº­t tÃ²a nhÃ 
- `DELETE /api/toa-nha/[id]` - XÃ³a tÃ²a nhÃ 

### PhÃ²ng
- `GET /api/phong` - Láº¥y danh sÃ¡ch phÃ²ng
- `POST /api/phong` - Táº¡o phÃ²ng má»›i
- `GET /api/phong/[id]` - Láº¥y thÃ´ng tin phÃ²ng
- `PUT /api/phong/[id]` - Cáº­p nháº­t phÃ²ng
- `DELETE /api/phong/[id]` - XÃ³a phÃ²ng

### KhÃ¡ch thuÃª
- `GET /api/khach-thue` - Láº¥y danh sÃ¡ch khÃ¡ch thuÃª
- `POST /api/khach-thue` - Táº¡o khÃ¡ch thuÃª má»›i
- `GET /api/khach-thue/[id]` - Láº¥y thÃ´ng tin khÃ¡ch thuÃª
- `PUT /api/khach-thue/[id]` - Cáº­p nháº­t khÃ¡ch thuÃª
- `DELETE /api/khach-thue/[id]` - XÃ³a khÃ¡ch thuÃª

### Há»£p Ä‘á»“ng
- `GET /api/hop-dong` - Láº¥y danh sÃ¡ch há»£p Ä‘á»“ng
- `POST /api/hop-dong` - Táº¡o há»£p Ä‘á»“ng má»›i
- `GET /api/hop-dong/[id]` - Láº¥y thÃ´ng tin há»£p Ä‘á»“ng
- `PUT /api/hop-dong/[id]` - Cáº­p nháº­t há»£p Ä‘á»“ng
- `DELETE /api/hop-dong/[id]` - XÃ³a há»£p Ä‘á»“ng

### Chá»‰ sá»‘ Ä‘iá»‡n nÆ°á»›c
- `GET /api/chi-so-dien-nuoc` - Láº¥y danh sÃ¡ch chá»‰ sá»‘
- `POST /api/chi-so-dien-nuoc` - Ghi chá»‰ sá»‘ má»›i

### HÃ³a Ä‘Æ¡n
- `GET /api/hoa-don` - Láº¥y danh sÃ¡ch hÃ³a Ä‘Æ¡n
- `POST /api/hoa-don` - Táº¡o hÃ³a Ä‘Æ¡n má»›i

### Thanh toÃ¡n
- `GET /api/thanh-toan` - Láº¥y danh sÃ¡ch thanh toÃ¡n
- `POST /api/thanh-toan` - Ghi nháº­n thanh toÃ¡n

### Sá»± cá»‘
- `GET /api/su-co` - Láº¥y danh sÃ¡ch sá»± cá»‘
- `POST /api/su-co` - BÃ¡o cÃ¡o sá»± cá»‘
- `GET /api/su-co/[id]` - Láº¥y thÃ´ng tin sá»± cá»‘
- `PUT /api/su-co/[id]` - Cáº­p nháº­t sá»± cá»‘
- `DELETE /api/su-co/[id]` - XÃ³a sá»± cá»‘

### ThÃ´ng bÃ¡o
- `GET /api/thong-bao` - Láº¥y danh sÃ¡ch thÃ´ng bÃ¡o
- `POST /api/thong-bao` - Gá»­i thÃ´ng bÃ¡o

### Dashboard
- `GET /api/dashboard/stats` - Láº¥y thá»‘ng kÃª dashboard

## ğŸ¤ Contributing

1. Fork repository
2. Táº¡o feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Táº¡o Pull Request

## ğŸ“„ License

Distributed under the MIT License. See `LICENSE` for more information.

## ğŸ“ Contact

Project Link: [https://github.com/yourusername/demo-phong-tro](https://github.com/yourusername/demo-phong-tro)

## ğŸ™ Acknowledgments

- [Next.js](https://nextjs.org/)
- [shadcn/ui](https://ui.shadcn.com/)
- [Tailwind CSS](https://tailwindcss.com/)
- [MongoDB](https://www.mongodb.com/)
- [NextAuth.js](https://next-auth.js.org/)